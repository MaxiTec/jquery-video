/**
 * jquery-video widget
 * Copyright 2015 DACHCOM.DIGITAL AG
 * @author Volker Andres, Marco Rieser
 * @see https://github.com/dachcom-digital/jquery-video
 * @version 0.2.0
 */
!function(i){"use strict";var t={_register:{},isRegistered:function(i){return void 0!==this._register[i]},isLoaded:function(i){return void 0!==this._register[i]&&this._register[i]===!0},register:function(i,t){t=t||!1,this._register[i]=t}};i.widget("dcd.video",{_create:function(){switch(this.element.data("type")){case"youtube":this.element.videoYoutube(),this._player=this.element.data("dcdVideoYoutube");break;case"vimeo":this.element.videoVimeo(),this._player=this.element.data("dcdVideoVimeo");break;case"dailymotion":this.element.videoDailymotion(),this._player=this.element.data("dcdVideoDailymotion");break;default:throw{name:"Video Error",message:"Unknown video type",toString:function(){return this.name+": "+this.message}}}},_initialize:function(){this._params=this.element.data("params")||{},this._code=this.element.data("code"),this._width=this.element.data("width"),this._height=this.element.data("height"),this._autoplay=this.element.data("autoplay"),this._playing=this._autoplay||!1,this._responsive=!0,this.element.data("responsive")===!1&&(this._responsive=!1),this._responsive===!0&&this.element.addClass("responsive"),this._calculateRatio()},play:function(){this._player.play()},pause:function(){this._player.pause()},stop:function(){this._player.stop()},playing:function(){return this._player.playing()},_calculateRatio:function(){this._responsive&&this.element.css("paddingBottom",this._height/this._width*100+"%")}}),i.widget("dcd.videoYoutube",i.dcd.video,{_create:function(){var i=this;this._initialize(),this.element.append("<div/>"),this._on(window,{youtubeapiready:function(){void 0===i._player&&(i._params.autoplay=i._autoplay,i._player=new YT.Player(i.element.children(":first")[0],{height:i._height,width:i._width,videoId:i._code,playerVars:i._params,events:{onStateChange:function(t){switch(window.parseInt(t.data,10)){case 1:i._playing=!0;break;default:i._playing=!1}i._trigger("statechange",{},t)}}}))}}),this._loadApi()},_loadApi:function(){if(t.isRegistered("youtube"))return void(t.isLoaded("youtube")&&i(window).trigger("youtubeapiready"));t.register("youtube");var e=document.createElement("script"),a=document.getElementsByTagName("script")[0];e.async=!0,e.src=document.location.protocol+"//www.youtube.com/iframe_api",a.parentNode.insertBefore(e,a),window.onYouTubeIframeAPIReady=function(){i(window).trigger("youtubeapiready"),t.register("youtube",!0)}},play:function(){this._player.playVideo(),this._playing=!0},pause:function(){this._player.pauseVideo(),this._playing=!1},stop:function(){this._player.stopVideo(),this._playing=!1},playing:function(){return this._playing},_destroy:function(){this.stop(),this._player.destroy()}}),i.widget("dcd.videoVimeo",i.dcd.video,{_create:function(){this._initialize();var t=(new Date).getTime();this.element.append(i("<iframe/>").attr("frameborder",0).attr("id","vimeo"+this._code+t).attr("width",this._width).attr("height",this._height).attr("src","http://player.vimeo.com/video/"+this._code+"?api=1&player_id=vimeo"+this._code+t+"&autoplay="+this._autoplay)),this._player=$f(this.element.children(":first")[0]),this._player.addEvent("ready",function(){})},play:function(){this._player.api("play"),this._playing=!0},pause:function(){this._player.api("pause"),this._playing=!1},stop:function(){this._player.api("unload"),this._playing=!1},playing:function(){return this._playing}}),i.widget("dcd.videoDailymotion",i.dcd.video,{_create:function(){var i=this;this._initialize(),i._params.autoplay=i._autoplay,this.element.append("<div/>"),this._on(window,{dailymotionapiready:function(){void 0===i._player&&(i._player=DM.player(i.element.children(":first")[0],{height:i._height,width:i._width,video:i._code,params:i.params}))}}),this._loadApi()},_loadApi:function(){if(t.isRegistered("dailymotion"))return void(t.isLoaded("dailymotion")&&i(window).trigger("dailymotionapiready"));t.register("dailymotion");var e=document.createElement("script"),a=document.getElementsByTagName("script")[0];e.async=!0,e.src=document.location.protocol+"//api.dmcdn.net/all.js",a.parentNode.insertBefore(e,a),window.dmAsyncInit=function(){i(window).trigger("dailymotionapiready"),t.register("dailymotion",!0)}},play:function(){this._player.play(),this._playing=!0},pause:function(){this._player.pause(),this._playing=!1},stop:function(){this._player.pause(),this._playing=!1},playing:function(){return this._playing}})}(jQuery);
